import{j as a}from"./index-mFzF45K3.js";const H=({title:e,status:s,leading:t,right:n,className:r})=>a.jsxs("header",{className:["border-b border-gray-800 bg-terminal-black/90 backdrop-blur px-4 py-3 flex flex-wrap items-center justify-between gap-3",r??""].join(" ").trim(),children:[a.jsxs("div",{className:"flex items-center gap-3 flex-wrap min-w-0",children:[t?a.jsx("div",{className:"hidden sm:block",children:t}):null,a.jsx("div",{className:"text-lg font-bold tracking-widest",children:e}),s?a.jsx("div",{className:"text-[10px] text-gray-500 tracking-widest",children:s}):null]}),n?a.jsx("div",{className:"flex items-center gap-3",children:n}):null]}),g="nullspace_tx_tracker_v1",p=200;let i=null;const l=new Set;function y(e){if(!e)return;const s=String(e).trim().toLowerCase();return s.startsWith("0x")?s.slice(2):s}function o(e){return`${e}_${Date.now().toString(36)}_${Math.random().toString(36).slice(2,8)}`}function c(e){return(e==null?void 0:e.type)==="tx"&&typeof e.updatedTs=="number"?e.updatedTs:e.ts}function u(){if(i)return i;try{const e=localStorage.getItem(g);if(!e)return i=[],i;const s=JSON.parse(e);return Array.isArray(s)?(i=s.filter(t=>t&&typeof t=="object").map(t=>{const n={id:typeof t.id=="string"?t.id:o("a"),ts:typeof t.ts=="number"?t.ts:Date.now(),surface:typeof t.surface=="string"?t.surface:"system"};return t.type==="tx"?{...n,type:"tx",kind:typeof t.kind=="string"?t.kind:"swap",status:typeof t.status=="string"?t.status:"submitted",message:typeof t.message=="string"?t.message:"Transaction",finalMessage:typeof t.finalMessage=="string"?t.finalMessage:void 0,updatedTs:typeof t.updatedTs=="number"?t.updatedTs:n.ts,pubkeyHex:typeof t.pubkeyHex=="string"?t.pubkeyHex:void 0,nonce:typeof t.nonce=="number"?t.nonce:void 0,txHash:typeof t.txHash=="string"?t.txHash:void 0,txDigest:typeof t.txDigest=="string"?t.txDigest:void 0,error:typeof t.error=="string"?t.error:void 0}:{...n,type:"log",level:typeof t.level=="string"?t.level:"info",message:typeof t.message=="string"?t.message:""}}).slice(-p).sort((t,n)=>c(n)-c(t)),i):(i=[],i)}catch{return i=[],i}}function f(e){const s=[...e].slice(0,p).sort((t,n)=>c(n)-c(t));i=s;try{localStorage.setItem(g,JSON.stringify(s))}catch{}for(const t of[...l])try{t()}catch{}}function d(e){const s=u(),t=s[0];if(t&&t.type===e.type&&t.surface===e.surface&&(e.type==="log"&&t.type==="log"&&t.message===e.message&&t.level===e.level||e.type==="tx"&&t.type==="tx"&&t.kind===e.kind&&t.status===e.status&&t.message===e.message&&t.txDigest===e.txDigest))return;const n=[e,...s].slice(0,p);f(n)}function h(e){return l.add(e),()=>l.delete(e)}function x(e){const s=u();return e?s.filter(t=>t.surface===e):[...s]}function D(e){{f([]);return}}function b(e,s,t="info"){const n={id:o("log"),type:"log",ts:Date.now(),surface:e,level:t,message:String(s??"")};return d(n),n.id}function w(e){const s={id:o("tx"),type:"tx",ts:Date.now(),surface:e.surface,kind:e.kind,status:"submitted",message:String(e.message??"Submitted"),updatedTs:Date.now(),pubkeyHex:e.pubkeyHex,nonce:e.nonce,txHash:e.txHash,txDigest:e.txDigest};return d(s),s.id}function m(e,s,t){const n=y(t);return u().find(r=>!(r.type!=="tx"||r.surface!==e||r.status!=="submitted"||s&&r.kind!==s||n&&y(r.pubkeyHex)!==n))}function S(e){const s=m(e.surface,e.kind,e.pubkeyHex);if(!s){const r={id:o("tx"),type:"tx",ts:Date.now(),surface:e.surface,kind:e.kind,status:"confirmed",message:String(e.finalMessage??"Confirmed"),updatedTs:Date.now(),pubkeyHex:e.pubkeyHex,txHash:e.txHash,txDigest:e.txDigest};return d(r),r.id}const t=u(),n={...s,status:"confirmed",finalMessage:String(e.finalMessage??s.finalMessage??s.message),updatedTs:Date.now(),txHash:e.txHash??s.txHash,txDigest:e.txDigest??s.txDigest};return f(t.map(r=>r.type==="tx"&&r.id===s.id?n:r)),s.id}function v(e){const s=m(e.surface,e.kind,e.pubkeyHex);if(!s){if(e.kind){const r={id:o("tx"),type:"tx",ts:Date.now(),surface:e.surface,kind:e.kind,status:"failed",message:String(e.finalMessage??"Failed"),updatedTs:Date.now(),pubkeyHex:e.pubkeyHex,error:e.error};return d(r),r.id}return b(e.surface,String(e.finalMessage??e.error??"Transaction failed"),"error")}const t=u(),n={...s,status:"failed",finalMessage:String(e.finalMessage??s.finalMessage??s.message),error:e.error??s.error,updatedTs:Date.now()};return f(t.map(r=>r.type==="tx"&&r.id===s.id?n:r)),s.id}function T(e=!1,s){const t=x(s);return JSON.stringify(t,null,e?2:0)}export{H as P,S as a,w as b,D as c,T as e,x as g,b as l,h as s,v as t};
