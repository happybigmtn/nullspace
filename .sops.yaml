# SOPS Configuration for Nullspace Secrets Management
#
# This file configures SOPS to encrypt secrets files using Age encryption.
# Different environments use separate Age keys for isolation.
#
# Prerequisites:
#   brew install sops age  # macOS
#   apt install sops age   # Ubuntu/Debian
#
# Key generation:
#   age-keygen -o ~/.config/sops/age/keys.txt
#
# Usage:
#   sops secrets/staging/secrets.enc.yaml  # Edit encrypted file
#   sops -d secrets/staging/secrets.enc.yaml > .env  # Decrypt to stdout
#   sops -e secrets/staging/secrets.yaml > secrets/staging/secrets.enc.yaml  # Encrypt

creation_rules:
  # Production secrets - requires production key
  - path_regex: secrets/production/.*\.enc\.(yaml|json|env)$
    age: >-
      age1production_key_placeholder_replace_with_actual_public_key

  # Staging secrets - requires staging key
  - path_regex: secrets/staging/.*\.enc\.(yaml|json|env)$
    age: >-
      age1xaw2rdg74qg5qtxltsj9sjzul9uptelmuptge36xdz4d9x4r7q7qt6vn49

  # Development secrets - can use local development key
  - path_regex: secrets/development/.*\.enc\.(yaml|json|env)$
    age: >-
      age1development_key_placeholder_replace_with_actual_public_key

  # CI secrets - for GitHub Actions automated deployments
  - path_regex: secrets/ci/.*\.enc\.(yaml|json|env)$
    age: >-
      age1ci_key_placeholder_replace_with_actual_public_key

# Encrypted key suffixes
# Only these file patterns can be decrypted/encrypted with sops
encrypted_suffix: .enc.yaml
