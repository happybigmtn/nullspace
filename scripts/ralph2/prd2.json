{
	"branchName": "ralph/e2e-qa-testing",
	"purpose": "End-to-end QA testing using browser automation (Playwright) on local network",
	"infrastructure": {
		"startCommand": "./scripts/start-local-network.sh --fresh",
		"mobileDevServer": "cd mobile && npm run web",
		"expectedEndpoints": {
			"simulator": "http://localhost:8080",
			"mobileWeb": "http://localhost:8081"
		}
	},
	"userStories": [
		{
			"id": "QA-001",
			"title": "Start local network and verify health",
			"acceptanceCriteria": [
				"Run ./scripts/start-local-network.sh --fresh in background",
				"Wait for simulator health check at http://localhost:8080/healthz",
				"Verify 4 consensus nodes are running",
				"Capture startup time in notes"
			],
			"priority": 1,
			"passes": true,
			"notes": "SETUP: Infrastructure running. Simulator at :8080, Gateway at :9010, 4 consensus nodes"
		},
		{
			"id": "QA-002",
			"title": "Start mobile web dev server",
			"acceptanceCriteria": [
				"Run npm run web in mobile directory in background",
				"Wait for dev server at http://localhost:8081",
				"Verify app loads in browser",
				"Take screenshot of initial splash screen"
			],
			"priority": 2,
			"passes": true,
			"notes": "SETUP: Mobile web at :8081 via Expo. Splash screen renders."
		},
		{
			"id": "QA-003",
			"title": "Test auth flow - new user registration",
			"acceptanceCriteria": [
				"Navigate to mobile web app",
				"Wait for splash screen to complete",
				"Verify auth screen appears for new session",
				"Verify 'Create Wallet' or 'Continue' button visible",
				"Take screenshot of auth screen"
			],
			"priority": 3,
			"passes": true,
			"notes": "AUTH: Welcome Back screen shows. SKIP (DEMO MODE) button navigates to lobby. AUTHENTICATE button requires biometric/password."
		},
		{
			"id": "QA-004",
			"title": "Test lobby navigation and balance display",
			"acceptanceCriteria": [
				"Complete auth flow to reach lobby",
				"Verify balance displays (may be 0 for new user)",
				"Verify all 10 game cards visible: Hi-Lo, Blackjack, Roulette, Craps, Baccarat, Casino War, Video Poker, Sic Bo, 3 Card Poker, Ultimate Holdem",
				"Take screenshot of lobby with all games visible",
				"Test scrolling if needed for all games"
			],
			"priority": 4,
			"passes": true,
			"notes": "LOBBY: All 10 game cards visible. Good evening greeting, balance, testnet indicator, event badge (Sic Bo Week)."
		},
		{
			"id": "QA-005",
			"title": "Test faucet claim flow",
			"acceptanceCriteria": [
				"From lobby, locate faucet/claim button",
				"Click to request faucet credits",
				"Verify balance updates after claim",
				"Capture new balance amount",
				"Take screenshot showing updated balance"
			],
			"priority": 5,
			"passes": true,
			"notes": "FAUCET: 'Claim now' button works. Balance updates to $1,000. Wallet address displayed (e.g., 301f45...2ebe)."
		},
		{
			"id": "QA-006",
			"title": "Test Hi-Lo game - full round",
			"acceptanceCriteria": [
				"Navigate to Hi-Lo from lobby",
				"Verify game screen loads with card display",
				"Place bet using chip selector",
				"Make Higher or Lower prediction",
				"Wait for result and verify win/loss calculation",
				"Verify balance updates correctly",
				"Take screenshots: initial state, bet placed, result"
			],
			"priority": 10,
			"passes": true,
			"notes": "GAME-TEST: PASS - Chip DRAG places bet, HIGHER/LOWER work, balance updates. Bet $5 → Won → Balance $1,995"
		},
		{
			"id": "QA-007",
			"title": "Test Blackjack game - hit/stand flow",
			"acceptanceCriteria": [
				"Navigate to Blackjack from lobby",
				"Place ante bet",
				"Verify initial 2 cards dealt to player and dealer",
				"Test HIT action - new card dealt",
				"Test STAND action - dealer reveals",
				"Verify win/loss/push outcome",
				"Take screenshots of each phase"
			],
			"priority": 11,
			"passes": false,
			"notes": "GAME-TEST: Core card game with actions"
		},
		{
			"id": "QA-008",
			"title": "Test Blackjack game - double down and split",
			"acceptanceCriteria": [
				"Play until double down opportunity (hands allowing double)",
				"Test DOUBLE action if available",
				"Play until split opportunity (pair dealt)",
				"Test SPLIT action if available",
				"Verify payout calculations for each scenario"
			],
			"priority": 12,
			"passes": false,
			"notes": "GAME-TEST: Advanced blackjack actions"
		},
		{
			"id": "QA-009",
			"title": "Test Roulette - all bet categories",
			"acceptanceCriteria": [
				"Navigate to Roulette from lobby",
				"Test inside bets: straight (single number)",
				"Test outside bets: red/black, odd/even, high/low",
				"Test column and dozen bets",
				"Verify wheel spin animation",
				"Verify payout calculations per bet type",
				"Take screenshots of bet placement and result"
			],
			"priority": 13,
			"passes": false,
			"notes": "GAME-TEST: Multiple simultaneous bet types"
		},
		{
			"id": "QA-010",
			"title": "Test Baccarat - main bets",
			"acceptanceCriteria": [
				"Navigate to Baccarat from lobby",
				"Test Player bet - verify 1:1 payout on win",
				"Test Banker bet - verify 0.95:1 payout (5% commission)",
				"Test Tie bet - verify 8:1 payout",
				"Verify card dealing animation",
				"Take screenshots of each bet type outcome"
			],
			"priority": 14,
			"passes": false,
			"notes": "GAME-TEST: Player/Banker/Tie core bets"
		},
		{
			"id": "QA-011",
			"title": "Test Baccarat - side bets",
			"acceptanceCriteria": [
				"Test Player Pair bet",
				"Test Banker Pair bet",
				"Test Lucky 6 bet",
				"Test Dragon Bonus (Player/Banker)",
				"Test Panda 8 bet",
				"Test Perfect Pair bet",
				"Document payout for each winning side bet"
			],
			"priority": 15,
			"passes": false,
			"notes": "GAME-TEST: 10 total bet types in Baccarat"
		},
		{
			"id": "QA-012",
			"title": "Test Casino War - basic and tie scenarios",
			"acceptanceCriteria": [
				"Navigate to Casino War from lobby",
				"Place ante bet",
				"Verify card comparison outcome",
				"Test War scenario (tie) - verify 'Go to War' option",
				"Test surrender option on tie",
				"Verify payout calculations",
				"Take screenshots of war scenario"
			],
			"priority": 16,
			"passes": false,
			"notes": "GAME-TEST: Simple comparison with tie handling"
		},
		{
			"id": "QA-013",
			"title": "Test Video Poker - deal and hold mechanics",
			"acceptanceCriteria": [
				"Navigate to Video Poker from lobby",
				"Place bet and deal initial 5 cards",
				"Test HOLD selection on individual cards",
				"Test DRAW to replace non-held cards",
				"Verify hand ranking displayed",
				"Verify payout per hand type (Jacks or Better paytable)",
				"Take screenshots of hold selection and final hand"
			],
			"priority": 17,
			"passes": false,
			"notes": "GAME-TEST: Card selection + hand evaluation"
		},
		{
			"id": "QA-014",
			"title": "Test Sic Bo - all bet categories",
			"acceptanceCriteria": [
				"Navigate to Sic Bo from lobby",
				"Test Big/Small bets (total 4-10 or 11-17)",
				"Test specific total bets (4-17)",
				"Test single die number bets",
				"Test double bets",
				"Test triple bets (specific and any)",
				"Test combination bets",
				"Verify dice animation and total display"
			],
			"priority": 18,
			"passes": false,
			"notes": "GAME-TEST: Dice betting with many bet types"
		},
		{
			"id": "QA-015",
			"title": "Test Three Card Poker - ante/play flow",
			"acceptanceCriteria": [
				"Navigate to 3 Card Poker from lobby",
				"Place ante bet",
				"View dealt 3-card hand",
				"Test PLAY decision (match ante)",
				"Test FOLD decision (forfeit ante)",
				"Verify hand ranking vs dealer",
				"Test Pair Plus side bet"
			],
			"priority": 19,
			"passes": false,
			"notes": "GAME-TEST: Ante/Play structure"
		},
		{
			"id": "QA-016",
			"title": "Test Ultimate Texas Holdem - street betting",
			"acceptanceCriteria": [
				"Navigate to Ultimate Holdem from lobby",
				"Place Ante and Blind bets",
				"View initial 2 hole cards",
				"Test 4x bet preflop (strong hand)",
				"Test Check preflop (weak hand)",
				"Test 2x bet on flop",
				"Test 1x bet on river",
				"Verify showdown and payout calculation"
			],
			"priority": 20,
			"passes": false,
			"notes": "GAME-TEST: Multi-street betting structure"
		},
		{
			"id": "QA-017",
			"title": "Test Craps - pass line and come bets",
			"acceptanceCriteria": [
				"Navigate to Craps from lobby",
				"Test Pass Line bet on come-out roll",
				"Test Don't Pass bet",
				"Test Come bet after point established",
				"Test Don't Come bet",
				"Verify point tracking",
				"Verify 7-out scenario"
			],
			"priority": 21,
			"passes": false,
			"notes": "GAME-TEST: Complex dice game with point tracking"
		},
		{
			"id": "QA-018",
			"title": "Test Craps - odds and proposition bets",
			"acceptanceCriteria": [
				"Test Pass Line Odds bet (behind pass line)",
				"Test Place bets on 4,5,6,8,9,10",
				"Test Field bet (single roll)",
				"Test Hardway bets",
				"Test proposition bets (any 7, any craps)",
				"Test every bonus bet on the come out roll",
				"Verify payout calculations for each bet type",
				"Document odds payout for each"
			],
			"priority": 22,
			"passes": false,
			"notes": "GAME-TEST: Advanced craps betting"
		},
		{
			"id": "QA-019",
			"title": "Test chip selector across all games",
			"acceptanceCriteria": [
				"Verify chip denominations displayed (1, 5, 10, 25, 100, etc.)",
				"Test selecting different chip values",
				"Test multiple chip placement",
				"Test clear/reset bet function",
				"Verify total bet amount updates correctly",
				"Test max bet limit enforcement"
			],
			"priority": 25,
			"passes": false,
			"notes": "UI-TEST: Universal betting component"
		},
		{
			"id": "QA-020",
			"title": "Test game header and back navigation",
			"acceptanceCriteria": [
				"From any game screen, verify header shows:",
				"  - Back button to lobby",
				"  - Current balance",
				"  - Game title",
				"Test back button returns to lobby correctly",
				"Verify balance persists after navigation"
			],
			"priority": 26,
			"passes": false,
			"notes": "UI-TEST: Navigation consistency"
		},
		{
			"id": "QA-021",
			"title": "Test connection loss and reconnection",
			"acceptanceCriteria": [
				"Start a game with active bet",
				"Simulate network disconnect (stop simulator briefly)",
				"Verify reconnection indicator appears",
				"Restart simulator",
				"Verify app reconnects automatically",
				"Verify game state restored correctly"
			],
			"priority": 30,
			"passes": false,
			"notes": "EDGE-CASE: Reconnection handling"
		},
		{
			"id": "QA-022",
			"title": "Test insufficient balance handling",
			"acceptanceCriteria": [
				"Attempt to place bet exceeding current balance",
				"Verify error message displayed",
				"Verify bet not submitted",
				"Test minimum bet enforcement"
			],
			"priority": 31,
			"passes": false,
			"notes": "EDGE-CASE: Balance validation"
		},
		{
			"id": "QA-023",
			"title": "Test rapid bet submission",
			"acceptanceCriteria": [
				"Attempt to submit multiple bets in rapid succession",
				"Verify no duplicate bet submissions",
				"Verify UI disables submit during pending bet",
				"Verify balance updates atomically"
			],
			"priority": 32,
			"passes": false,
			"notes": "EDGE-CASE: Race condition prevention"
		},
		{
			"id": "QA-024",
			"title": "Test vault screen access",
			"acceptanceCriteria": [
				"Navigate to vault/settings from lobby",
				"Verify vault screen loads",
				"Verify public key displayed",
				"Test export/backup option visibility",
				"Take screenshot of vault screen"
			],
			"priority": 35,
			"passes": false,
			"notes": "VAULT: Account management"
		},
		{
			"id": "QA-025",
			"title": "Document all bugs found during testing",
			"acceptanceCriteria": [
				"Create bug list from test failures",
				"Categorize by severity: Critical/High/Medium/Low",
				"Link each bug to failing test case",
				"Update PRD with fix tasks as new stories"
			],
			"priority": 40,
			"passes": false,
			"notes": "META: Iterative bug tracking"
		},
		{
			"id": "QA-026",
			"title": "Create visual regression baseline",
			"acceptanceCriteria": [
				"Save screenshots from all passing tests",
				"Document expected visual state for each screen",
				"Note any visual issues for UX stories"
			],
			"priority": 41,
			"passes": false,
			"notes": "META: Visual baseline for future regression"
		},
		{
			"id": "QA-N01",
			"title": "[NATIVE] SecureStore wallet persistence across app restarts",
			"acceptanceCriteria": [
				"Create wallet on first launch",
				"Note public key displayed in vault",
				"Force quit and relaunch app",
				"Verify same wallet loaded (skip auth, same public key)",
				"Run on both iOS Simulator and Android Emulator"
			],
			"priority": 50,
			"passes": false,
			"notes": "NATIVE-ONLY: Tests expo-secure-store persistence. Web uses localStorage fallback.",
			"platform": "native",
			"testCommand": "cd mobile && npm run e2e:ios"
		},
		{
			"id": "QA-N02",
			"title": "[NATIVE] Vault password minimum 12 characters enforcement",
			"acceptanceCriteria": [
				"Navigate to vault settings",
				"Attempt to set 8-character password",
				"Verify error: 'Password must be at least 12 characters'",
				"Set valid 12+ character password",
				"Verify password strength indicator shows entropy",
				"Verify password accepted"
			],
			"priority": 51,
			"passes": false,
			"notes": "NATIVE-ONLY: Tests US-094 implementation on native. Password rules same on web but UX differs.",
			"platform": "native",
			"testCommand": "cd mobile && npm run e2e:ios"
		},
		{
			"id": "QA-N03",
			"title": "[NATIVE] Biometric authentication for vault access",
			"acceptanceCriteria": [
				"Enable biometric auth in vault settings",
				"Exit and re-enter vault screen",
				"Verify Face ID / Touch ID prompt appears",
				"Test biometric success grants access",
				"Test biometric failure shows password fallback"
			],
			"priority": 52,
			"passes": false,
			"notes": "NATIVE-ONLY: Tests expo-local-authentication. Not available on web.",
			"platform": "native",
			"testCommand": "cd mobile && npm run e2e:ios"
		},
		{
			"id": "QA-N04",
			"title": "[NATIVE] Haptic feedback on game actions",
			"acceptanceCriteria": [
				"Place bet - verify light haptic",
				"Win outcome - verify success haptic pattern",
				"Loss outcome - verify error haptic",
				"Card deal - verify medium haptic",
				"Chip selection - verify selection haptic",
				"Test on real device (simulator has no haptics)"
			],
			"priority": 53,
			"passes": false,
			"notes": "NATIVE-ONLY: Tests expo-haptics. Requires real device. Web has no haptic API.",
			"platform": "native-device",
			"testCommand": "MANUAL: Real device required"
		},
		{
			"id": "QA-N05",
			"title": "[NATIVE] App backgrounding preserves game state",
			"acceptanceCriteria": [
				"Navigate to a game and place bet",
				"Press home button (background app)",
				"Wait 30 seconds",
				"Return to app (foreground)",
				"Verify game state preserved",
				"Verify WebSocket reconnected if needed"
			],
			"priority": 54,
			"passes": false,
			"notes": "NATIVE-ONLY: Tests app lifecycle. Web tab switching is different.",
			"platform": "native",
			"testCommand": "cd mobile && npm run e2e:ios"
		},
		{
			"id": "QA-N06",
			"title": "[NATIVE] Network loss recovery with airplane mode",
			"acceptanceCriteria": [
				"Navigate to game with active connection",
				"Enable airplane mode",
				"Verify 'Reconnecting...' indicator appears within 5s",
				"Disable airplane mode",
				"Verify automatic reconnection within 30s",
				"Verify game state synced after reconnect"
			],
			"priority": 55,
			"passes": false,
			"notes": "NATIVE-ONLY: Tests real network recovery. Web can only simulate via devtools.",
			"platform": "native-device",
			"testCommand": "MANUAL: Real device required for airplane mode"
		},
		{
			"id": "QA-N07",
			"title": "[NATIVE] Push notification for big wins",
			"acceptanceCriteria": [
				"Enable notifications in app settings",
				"Background the app",
				"Win a bet via another session/bot",
				"Verify push notification received",
				"Tap notification returns to app",
				"Verify balance updated"
			],
			"priority": 56,
			"passes": false,
			"notes": "NATIVE-ONLY: Tests expo-notifications. Requires push cert setup.",
			"platform": "native-device",
			"testCommand": "MANUAL: Push infrastructure required"
		},
		{
			"id": "QA-N08",
			"title": "[NATIVE] Card dealing animation smoothness",
			"acceptanceCriteria": [
				"Start Blackjack game",
				"Deal cards and observe animation",
				"Verify 60fps smooth animation (no jank)",
				"Verify cards slide from dealer position",
				"Verify flip animation on reveal",
				"Profile with Flipper/Xcode Instruments"
			],
			"priority": 57,
			"passes": false,
			"notes": "NATIVE-ONLY: Tests react-native-reanimated performance. Web animations may differ.",
			"platform": "native",
			"testCommand": "cd mobile && npm run e2e:ios"
		},
		{
			"id": "QA-N09",
			"title": "[NATIVE] Chip drag gesture on touch screen",
			"acceptanceCriteria": [
				"Long-press chip to pick up",
				"Drag chip to bet area",
				"Release to place bet",
				"Verify haptic on pickup and drop",
				"Test pan gesture cancellation (drag off-screen)",
				"Test multi-touch (two chips simultaneously)"
			],
			"priority": 58,
			"passes": false,
			"notes": "NATIVE-ONLY: Tests react-native-gesture-handler touch. Web uses mouse drag.",
			"platform": "native",
			"testCommand": "cd mobile && npm run e2e:ios"
		},
		{
			"id": "QA-N10",
			"title": "[NATIVE] iOS Simulator full game flow",
			"acceptanceCriteria": [
				"Build iOS debug app: npm run e2e:build:ios",
				"Launch on iPhone 15 simulator",
				"Complete auth flow",
				"Play one round of each game",
				"Verify no crashes in Xcode console",
				"Capture test report"
			],
			"priority": 60,
			"passes": false,
			"notes": "NATIVE-E2E: Full Detox test suite on iOS",
			"platform": "ios",
			"testCommand": "cd mobile && npm run e2e:ios"
		},
		{
			"id": "QA-N11",
			"title": "[NATIVE] Android Emulator full game flow",
			"acceptanceCriteria": [
				"Build Android debug APK: npm run e2e:build:android",
				"Launch on Pixel 7 API 34 emulator",
				"Complete auth flow",
				"Play one round of each game",
				"Verify no crashes in Logcat",
				"Capture test report"
			],
			"priority": 61,
			"passes": false,
			"notes": "NATIVE-E2E: Full Detox test suite on Android",
			"platform": "android",
			"testCommand": "cd mobile && npm run e2e:android"
		},
		{
			"id": "QA-N12",
			"title": "[NATIVE] Memory stability during extended play",
			"acceptanceCriteria": [
				"Launch app and navigate to game",
				"Play 50 consecutive rounds",
				"Monitor memory usage (Xcode/Android Studio)",
				"Verify memory stays under 500MB",
				"Verify no memory leaks (stable usage)",
				"Document peak and average memory"
			],
			"priority": 62,
			"passes": false,
			"notes": "NATIVE-ONLY: Tests for animation memory leaks. Web has different memory model.",
			"platform": "native",
			"testCommand": "MANUAL: Profiler required"
		}
	],
	"bugTracker": {
		"critical": [],
		"high": [
			{
				"id": "BUG-002",
				"title": "Session/wallet not persisted on full page navigation",
				"description": "When browser performs full page reload (not React Router SPA navigation), a new ephemeral wallet is created, losing previous balance.",
				"stepsToReproduce": [
					"1. Navigate to lobby and claim faucet",
					"2. Manually enter URL http://localhost:8081/game/hi_lo in browser",
					"3. Observe new wallet created, balance lost"
				],
				"expectedBehavior": "Wallet keypair should persist in localStorage/SecureStore across navigation",
				"actualBehavior": "New wallet generated on each full page load",
				"note": "SPA navigation via React Router preserves session correctly",
				"foundDate": "2026-01-07"
			}
		],
		"medium": [
			{
				"id": "BUG-001",
				"title": "UX: Chip tap only selects, drag required to place bet",
				"description": "Tapping a chip only selects it (visual blue ring). To actually place a bet, user must DRAG the chip upward. This is not intuitive.",
				"tutorial_mismatch": "Tutorial says 'tap to add to your bet' but tap only selects, drag is required",
				"recommendation": "Either add tap-to-place or update tutorial to clearly explain drag gesture",
				"severity": "UX-discoverability",
				"foundDate": "2026-01-07"
			}
		],
		"low": []
	},
	"testResults": {
		"passed": 6,
		"failed": 0,
		"skipped": 0,
		"lastRun": "2026-01-07"
	}
}
